# China Network Configuration for Trading Graph
# 
# This file provides optimized settings for running Trading Graph
# in mainland China's network environment (Great Firewall).
#
# Usage: Copy relevant settings to your .env file or source this file:
#   source .env.china
#
# Last updated: 2026-02-26

# ================================================================
# CHINA NETWORK MODE
# ================================================================
# Enable China direct mode (disable VPN routing)
TRADING_CHINA_DIRECT=1
TRADING_VPN=0

# ================================================================
# PROXY SETTINGS (Optional - for China + VPN users)
# ================================================================
# If you need to access international sources while in China,
# configure your VPN proxy here:
# TRADING_PROXY_URL=http://127.0.0.1:7890
# TRADING_PROXY_URL=socks5://127.0.0.1:1080

# ================================================================
# DATA SOURCE PRIORITY (China-optimized)
# ================================================================
# Primary data sources for China A-shares (fastest in China)
TRADING_PRIMARY_SOURCE=tencent
TRADING_ENABLED_SOURCES=tencent,akshare,sina

# Enable AkShare (recommended for China users)
TRADING_AKSHARE_ENABLED=1

# ================================================================
# CONNECTION SETTINGS (China-optimized timeouts)
# ================================================================
# Reduced timeouts for China network (GFW can cause delays)
TRADING_CONNECTION_TIMEOUT=15
TRADING_REQUEST_TIMEOUT=12
TRADING_NETWORK_PROBE_TIMEOUT=4

# Retry settings for unreliable connections
TRADING_RETRY_ATTEMPTS=5
TRADING_RETRY_DELAY=2.0

# ================================================================
# DNS SETTINGS (Optional - for DNS pollution issues)
# ================================================================
# Use Chinese DNS servers for better resolution
# TRADING_DNS_SERVERS=114.114.114.114,223.5.5.5,119.29.29.29

# ================================================================
# NEWS SOURCES (China-accessible)
# ================================================================
# Chinese news sources (no VPN required)
# - EastMoney (eastmoney.com)
# - Sina Finance (finance.sina.com.cn)
# - Xueqiu (xueqiu.com)
# - Caixin (caixin.com)
# - CSRC (csrc.gov.cn)

# International sources (VPN required - will be skipped in China direct mode)
# - Reuters, Bloomberg, Yahoo Finance, etc.

# Keep LLM training fully independent from GM cycle outputs by default.
# Set to 1 only if you explicitly want to bootstrap LLM stock codes from
# GM cycle-history artifacts.
TRADING_LLM_ALLOW_GM_BOOTSTRAP=0

# ================================================================
# SEARCH ENGINES (China-accessible)
# ================================================================
# For LLM training data collection
# China-accessible engines:
# - Bing CN (cn.bing.com)
# - Baidu (www.baidu.com)
# - Sogou (www.sogou.com)
# - EastMoney Search
# - Sina Finance Search

# ================================================================
# CACHE SETTINGS (China-optimized)
# ================================================================
# Increased caching to reduce network calls
TRADING_CACHE_TTL_HOURS=8
TRADING_MAX_MEMORY_CACHE_MB=1000

# ================================================================
# MODEL DOWNLOAD (China mirrors)
# ================================================================
# For downloading ML models, use China mirrors:
# HUGGINGFACE_MIRROR=https://hf-mirror.com
# PYPI_MIRROR=https://pypi.tuna.tsinghua.edu.cn/simple

# ================================================================
# PERFORMANCE TUNING (China network)
# ================================================================
# Parallel downloads (reduce for unstable connections)
TRADING_PARALLEL_DOWNLOADS=6

# Connection pooling
TRADING_MAX_CONNECTIONS=20
TRADING_CONNECTION_POOL_SIZE=10

# ================================================================
# FAILBACK SETTINGS
# ================================================================
# Enable aggressive fallback for China network
TRADING_ENABLE_AGGRESSIVE_FALLBACK=1
TRADING_FALLBACK_CHAIN=tencent,akshare,sina,localdb

# ================================================================
# MONITORING (China network diagnostics)
# ================================================================
# Run network diagnostics
# python -m utils.china_diagnostics

# Check health
# python main.py --health

# ================================================================
# TROUBLESHOOTING
# ================================================================
# If you experience issues:
# 1. Check network mode: python -c "from core.network import get_network_env; print(get_network_env())"
# 2. Test data sources: python -c "from data.fetcher import get_fetcher; f = get_fetcher(); print(f._sources)"
# 3. Run diagnostics: python main.py --doctor
# 
# Common issues:
# - Timeout errors: Increase TRADING_CONNECTION_TIMEOUT
# - Source unavailable: Check TRADING_ENABLED_SOURCES
# - Model download fails: Use HUGGINGFACE_MIRROR
# - Slow PyPI installs: Use -i https://pypi.tuna.tsinghua.edu.cn/simple
